language: rust
rust:
    - stable
    - beta
    - nightly
os:
    - linux
    - osx

before_script:
    - |
        pip install 'travis-cargo<0.2' --user
        if [[ -e ~/Library/Python/2.7/bin ]]; then export PATH=~/Library/Python/2.7/bin:$PATH; fi &&
        if [[ -e ~/.local/bin ]]; then export PATH=~/.local/bin:$PATH; fi &&
        export TRAVIS_CARGO_NIGHTLY_FEATURE=""

script:
    - |
        travis-cargo build &&
        travis-cargo test &&
        travis-cargo test -- --no-default-features --features "ssl with_serde"
